<div class="header-img">
    <p class="header-text">SHIURIM</p>
  
 </div>
 <p-sidebar [(visible)]="filterSidebarVisible" position="left" class="filter-sidebar" [modal]="true">
    <div class="active-filters" *ngIf="hasAnyFilter()">
  <span *ngFor="let ravId of selectedRavIds" class="filter-chip">
    {{ getRavName(ravId) }}
    <button (click)="removeRav(ravId)">×</button>
  </span>
  <span *ngFor="let topicId of selectedTopicIds" class="filter-chip">
    {{ getTopicName(topicId) }}
    <button (click)="removeTopic(topicId)">×</button>
  </span>
  <span *ngIf="selectedYear" class="filter-chip">
    {{ selectedYear }}
    <button (click)="removeYear()">×</button>
  </span>
  <p-button class="clear-all" (click)="clearAll()">Clear All</p-button>
</div>
     <div class="filters">
         <p>Rav</p> 
         <p-divider></p-divider>
         <div *ngFor="let rav of ravList">
  <p-checkbox
    [label]="rav.name"
    [value]="rav.id"
    [(ngModel)]="selectedRavIds"
    [disabled]="!enabledRavIds.includes(rav.id)"
    (onChange)="applyFilters()">
  </p-checkbox>
</div>
         
         <p>Topic</p> 
         <p-divider></p-divider>
      <div *ngFor="let topic of topicList">
  <p-checkbox
    [label]="topic.name"
    [value]="topic.id"
    [(ngModel)]="selectedTopicIds"
    [disabled]="!enabledTopicIds.includes(topic.id)"
    (onChange)="applyFilters()">
  </p-checkbox>
</div>   
 
         <p>Year</p> 
         <p-divider></p-divider>
         <p-inputNumber 
             inputId="yearFilter" 
             [(ngModel)]="selectedYear" 
             [min]="2005" 
             [max]="2050" 
             [placeholder]="'Filter by Year'"
             [step]="1" 
             [useGrouping]="false"
             [showButtons]="true" 
             (ngModelChange)="applyFilters()">
         </p-inputNumber>
     </div>
 </p-sidebar>


<div class="card fade-in flex">
    <div class="filters desktop-only">
        <div class="active-filters" *ngIf="hasAnyFilter()">
  <span *ngFor="let ravId of selectedRavIds" class="filter-chip">
    {{ getRavName(ravId) }}
    <button (click)="removeRav(ravId)">×</button>
  </span>
  <span *ngFor="let topicId of selectedTopicIds" class="filter-chip">
    {{ getTopicName(topicId) }}
    <button (click)="removeTopic(topicId)">×</button>
  </span>
  <span *ngIf="selectedYear" class="filter-chip">
    {{ selectedYear }}
    <button (click)="removeYear()">×</button>
  </span>
  <p-button class="clear-all" (click)="clearAll()">Clear All</p-button>
</div>
        <p>Rav</p> 
        <p-divider></p-divider>
        <div *ngFor="let rav of ravList">
  <p-checkbox
    [label]="rav.name"
    [value]="rav.id"
    [(ngModel)]="selectedRavIds"
    [disabled]="!enabledRavIds.includes(rav.id)"
    (onChange)="applyFilters()">
  </p-checkbox>
</div>
      <p>Topic</p> 
        <p-divider></p-divider>    
      <div *ngFor="let topic of topicList">
  <p-checkbox
    [label]="topic.name"
    [value]="topic.id"
    [(ngModel)]="selectedTopicIds"
    [disabled]="!enabledTopicIds.includes(topic.id)"
    (onChange)="applyFilters()">
  </p-checkbox>
</div>  
        

        <p>Year</p> 
        <p-divider></p-divider>
        <p-inputNumber 
            inputId="yearFilter" 
            [(ngModel)]="selectedYear" 
            [min]="2005" 
            [max]="2050" 
            [placeholder]="'Filter by Year'"
            [step]="1" 
            [useGrouping]="false"
            [showButtons]="true" 
            (ngModelChange)="applyFilters()">
        </p-inputNumber>
    </div>
    <p-divider layout="vertical" class="desktop-only" />

<div class="shiurim-table">
    <div class="tableFiltersAndSearch">
    <p-button class="mobile-filter-btn" (click)="filterSidebarVisible = true">Filter</p-button>
    <input type="text" 
    pInputText 
    id="searchBar" 
    class="search" 
    [(ngModel)]="searchQuery" 
    (ngModelChange)="applyFilters()" 
    placeholder="Search by Title, Topic or Rav"
    >
     </div>
    <app-shiurim-table [filteredShiurim]="filteredShiurim" [shiurim]="shiurim" [viewMode]="'full'"></app-shiurim-table>


  
</div>

</div>
