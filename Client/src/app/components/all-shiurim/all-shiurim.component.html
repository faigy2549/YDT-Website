<div class="header-img">
    <br><br><br> <br><br><br>
    <p class="header-text">SHIURIM</p>
 </div>
<div class="card fade-in flex">
   
    <div class="filters">
        <p>Rav</p> <i icon="pi pi-plus"></i>
        <p-divider></p-divider>
        <select  id="ravFilter"  [(ngModel)]="selectedRav" (change)="applyFilters()">
            Filter by Rav:
            <option value="">All</option>
            <option *ngFor="let rav of ravList" [value]="rav.id">{{ rav.name }}</option>
        </select>

        <p>Topic</p> <i icon="pi pi-plus"></i>
        <p-divider></p-divider>
        <select id="topicFilter" [(ngModel)]="selectedTopic" (change)="applyFilters()" >
            <option value="" selected>All</option>
            <option *ngFor="let topic of topicList" [value]="topic.id">{{ topic.name }}</option>
        </select>
        <p>Year</p> <i icon="pi pi-plus"></i>
        <p-divider></p-divider>
        <input id="yearFilter" [(ngModel)]="selectedYear" (change)="applyFilters()" type="number" placeholder="Filter by Year" />
    </div>
    <p-divider layout="vertical" />
     <div class="shiurim-table">
    <input 
        id="searchBar" 
        class="search"
        type="text" 
        [(ngModel)]="searchQuery" 
        (input)="applyFilters()" 
        placeholder="Search by Title, Topic or Rav" 
    />
    <p-table [value]="filteredShiurim" [responsive]="true"  [paginator]="true"
        [rows]="5"

        [rowsPerPageOptions]="[5, 10, 20]"
    >
        <ng-template pTemplate="body" let-shiur let-i="index">
            <tr class="table-row fade-in-row" [style.animation-delay]="i * 0.2 + 's'">
                <td class="td-flex">
                    <img
                        [src]="'../../../assets/image.png'"
                        [alt]="shiur.rav?.name"
                        class="profile-img"
                    />
                    {{ shiur.title }}<br /><br />
                    {{ shiur.rav?.name }}<br /><br />
                    {{ shiur.date | date: 'mediumDate' }}
                </td>
                <td class="td">{{ shiur.topic?.name }}</td>
                <td class="td-audio">
                    <audio  controls preload="none" class="audio-player">
                        <source src="../../../assets/Chamol Kempeh.mp3" type="audio/mp3">
                        <source src="../../../assets/Chamol Kempeh.mp3" type="audio/ogg">
                        <source src="../../../assets/Chamol Kempeh.mp3" type="audio/wav">
                    </audio>
                </td>
            </tr>
            <br>
        </ng-template>
    </p-table>
</div>
</div>
