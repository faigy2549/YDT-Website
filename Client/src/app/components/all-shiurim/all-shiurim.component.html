<div class="header-img">
    <br><br><br> <br><br><br>
    <p class="header-text">SHIURIM</p>
 </div>
<div class="card fade-in flex">
   
    <div class="filters">
        <p>Rav</p> 
        <p-divider></p-divider>
        <p-dropdown 
            [options]="ravList" 
            id="ravFilter" 
            placeholder="Filter By Rav" 
            [(ngModel)]="selectedRav" 
            optionLabel="name"
            optionValue="id"
            (onChange)="applyFilters()">
        </p-dropdown>
        
        <p>Topic</p> 
        <p-divider></p-divider>
        <p-dropdown 
            [options]="topicList" 
            id="topicFilter" 
            placeholder="Filter By Topic" 
            [(ngModel)]="selectedTopic" 
            optionLabel="name"
            optionValue="id"
            (onChange)="applyFilters()">
        </p-dropdown>
        

        <p>Year</p> 
        <p-divider></p-divider>
        <p-inputNumber 
            inputId="yearFilter" 
            [(ngModel)]="selectedYear" 
            [min]="2005" 
            [max]="2050" 
            [placeholder]="'Filter by Year'"
            [step]="1" 
            [useGrouping]="false"
            [showButtons]="true" 
            (ngModelChange)="applyFilters()">
        </p-inputNumber>
    </div>
    <p-divider layout="vertical" />
<div class="shiurim-table">

    <input type="text" 
    pInputText 
    id="searchBar" 
    class="search" 
    [(ngModel)]="searchQuery" 
    (ngModelChange)="applyFilters()" 
    placeholder="Search by Title, Topic or Rav"
    >
    

    <p-table [value]="filteredShiurim" 
        [responsive]="true" [paginator]="true"
        [rows]="10"
        [rowsPerPageOptions]="[10, 20, 40]"
    >
        <ng-template pTemplate="body" let-shiur let-i="index">
            <tr class="table-row fade-in-row" [style.animation-delay]="i * 0.2 + 's'">
                <td class="td-flex">
                    <img
                        [src]="'../../../assets/image.png'"
                        [alt]="shiur.rav?.name"
                        class="profile-img"
                    />
                    {{ shiur.title }}<br /><br />
                    {{ shiur.rav?.name }}<br /><br />
                    {{ shiur.date | date: 'mediumDate' }}
                </td>
                <td class="td">{{ shiur.topic?.name }}</td>
                <td class="td-audio">
                    <audio controls preload="none" class="audio-player">
                        <source src="../../../assets/Chamol Kempeh.mp3" type="audio/mp3">
                        <source src="../../../assets/Chamol Kempeh.mp3" type="audio/ogg">
                        <source src="../../../assets/Chamol Kempeh.mp3" type="audio/wav">
                    </audio>
                </td>
            </tr>
            <br>
        </ng-template>
    </p-table>
</div>

</div>
